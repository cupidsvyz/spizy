<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Tribute to Princess Spizy.">
    <meta name="keywords" content="findom, princess, tribute, financial domination">
    <meta name="author" content="Devoted Follower">
    <meta name="robots" content="index, follow">
    <title>Princess Spizy</title>
    <link rel="icon" type="image/png"
        href="https://pbs.twimg.com/profile_images/1921606677255925760/PJR8EFM8_400x400.jpg">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Playfair+Display:wght@700&display=swap"
        rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Pinyon+Script&display=swap"
        rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="./firebase-config.js"></script>
    <style>
        :root {
            --pink-accent: #ff69b4;
            --dark-bg: #1a1a1a;
            --dark-secondary: #282a36;
            --text-primary: #f3f3f3;
            --text-secondary: #a1a1a1;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            /* Smooth scrolling for anchor links */
        }

        body {
            background: linear-gradient(135deg, var(--dark-bg) 0%, #2d2d2d 100%);
            font-family: 'Inter', sans-serif;
            color: var(--text-primary);
            line-height: 1.6;
            padding: 30px 20px;
            background: #363642;
            animation: gradientAnimation 15s ease infinite;
            background-size: 200% 200%;
            /* Ensure full height and no cutoff on mobile Safari */
            min-height: 100vh;
            margin: 0;
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
            box-sizing: border-box;
        }

        /* Prevent scrolling when popup is open */
        .main-container.no-scroll {
            overflow: hidden;
            height: 100vh;
            touch-action: none;
            /* Prevents touch scrolling on mobile */
        }

        .main-container {
            position: fixed;
            top: calc(env(safe-area-inset-top) + 30px);
            left: 20px;
            right: 20px;
            bottom: calc(env(safe-area-inset-bottom) + 30px);
            max-width: 1200px;
            margin: 0 auto;
            padding: 0;
            height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 60px);
            /* 60px = 30px top + 30px bottom */
            background: #282a36;
            border-radius: 20px;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            /* Smooth scrolling on iOS */
            box-sizing: border-box;
        }

        @keyframes gradientAnimation {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        /* Info Container */
        .info-container {
            position: relative;
            background: url('https://images.unsplash.com/photo-1618005182380-4d8f8438790e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80') center/cover no-repeat;
            background: #ae4879;
            border-radius: 0;
            padding: 2rem;
            text-align: center;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            align-items: center;
            justify-content: center;
        }

        .info-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(26, 26, 26, 0.7);
            z-index: 1;
        }

        .info-content {
            position: relative;
            z-index: 2;
        }

        .profile-pic {
            border: 6px solid var(--pink-accent);
            border-radius: 50%;
            width: 140px;
            height: 140px;
            margin-left: 50%;
            transform: translateX(-50%);
            object-fit: cover;
            box-shadow: 0 0 25px rgba(255, 105, 180, 0.5), inset 0 0 10px rgba(255, 105, 180, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .profile-pic:hover {
            /* Slight rotation on hover */
            box-shadow: 0 0 35px rgba(255, 105, 180, 0.7), inset 0 0 15px rgba(255, 105, 180, 0.5);
        }

        .title {
            font-family: 'Playfair Display', serif;
            font-size: 2.75rem;
            font-weight: 700;
            letter-spacing: -0.025em;
            background: linear-gradient(45deg, var(--pink-accent), #ffffff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 1rem 0 0.5rem;
        }

        .bio {
            color: var(--text-secondary);
            font-size: 1rem;
            max-width: 400px;
            margin: 0 auto;
        }

        /* Links Container */
        .links-container {
            background: var(--dark-secondary);
            border-radius: 0;
            padding: 1rem 20px;
        }

        .link-item {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            width: 100%;
            box-sizing: border-box;
            padding: 1rem 2rem;
            background: #363642;
            border: 1px solid transparent;
            border-radius: 200px;
            margin-bottom: 20px;
            transition: background 0.3s ease, border-color 0.3s ease, transform 0.2s ease;
            text-decoration: none;
            color: var(--text-primary);
            opacity: 0;
            /* For staggered animation */
            animation: fadeIn 0.8s ease-out forwards;
        }

        /* Staggered animation delays for link items */
        .link-item:nth-child(1) {
            animation-delay: 0.2s;
        }

        .link-item:nth-child(2) {
            animation-delay: 0.3s;
        }

        .link-item:nth-child(3) {
            animation-delay: 0.4s;
        }

        .link-item:nth-child(4) {
            animation-delay: 0.5s;
        }

        .link-item:nth-child(5) {
            animation-delay: 0.6s;
        }

        .dropdown {
            position: relative;
            cursor: pointer;
            user-select: none;
            display: flex;
            flex-direction: column;
            align-items: start;
            padding: 1rem 1.5rem;
        }

        .dropdown-content {
            position: relative;
            top: 100%;
            left: 0;
            right: 0;
            margin-top: 10px;
            margin-bottom: 20px;
            border-radius: 12px;
            overflow: hidden;
            max-height: 0;
            opacity: 0;
            width: 100%;
            display: none;
            transition: max-height 0.5s ease-out, opacity 0.1s ease-out;
            z-index: 10;
            background: transparent;
            flex-direction: column;
            justify-content: space-between;
            gap: 0.7rem;
        }

        .dropdown-content.show {
            max-height: 600px;
            /* Adjust as needed */
            opacity: 1;
            display: flex;
        }

        .link-item.sub-item {
            margin-bottom: 10px;
            border-radius: 12px;
            padding: 0.8rem 0.8rem;
        }

        .link-item.sub-item:last-child {
            margin-bottom: 0;
        }

        .dropdown-arrow {
            transition: transform 0.3s ease;
        }

        .dropdown.open .dropdown-arrow {
            transform: rotate(180deg);

        }

        /* Staggered animation delays for link items */
        .links-container .link-item:nth-child(1) {
            animation-delay: 0.2s;
        }

        .links-container .link-item:nth-child(2) {
            animation-delay: 0.3s;
        }

        .links-container .link-item:nth-child(3) {
            animation-delay: 0.4s;
        }

        .links-container .link-item:nth-child(4) {
            animation-delay: 0.5s;
        }

        .links-container .link-item:nth-child(5) {
            animation-delay: 0.6s;
        }

        .links-container .link-item:nth-child(6) {
            animation-delay: 0.7s;
        }

        .inside-item-container {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            flex: 1;
        }

        .inside-dropdown-container {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            flex: 1;
            width: 100%;
        }

        .arrow-icon {
            flex-shrink: 0;
        }

        .link-item:hover {
            background: #3d3d3d;
            border-color: var(--pink-accent);
            transform: translateY(-5px);
        }

        .link-item svg {
            width: 34px;
            height: 34px;
            margin-right: -10px;
            stroke: var(--pink-accent);
            flex-shrink: 0;
        }

        .dropdown svg {
            margin-right: -10px;
        }

        .X-image {
            width: 45px;
            height: 45px;
            background: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .paypal {
            background: #fff;
        }

        .paylah {
            border-radius: 10px;
            width: 40px;
            height: 60px;

        }

        .loyal-fans {
            background: #fff;
            width: 40px;
            height: 40px;
        }

        .loyal-fans img {
            transform: scale(1.5);
        }

        .tributify {
            background: #fff;
        }

        .paylah img {
            border-radius: 10px;
            transform: scale(1.6);
        }

        .X-image-info {
            width: 25px;
            height: 25px;
            background: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .link-item img {
            object-fit: contain;
            scale: 0.6;
        }

        .link-content {
            flex: 1;
        }

        .link-title {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .link-description {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        /* Fade Animation */
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 0.8s ease-out forwards;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Back to Top Button */
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--pink-accent);
            color: var(--text-primary);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
            cursor: pointer;
            z-index: 1000;
        }

        .back-to-top.show {
            opacity: 1;
            visibility: visible;
        }

        .back-to-top:hover {
            transform: scale(1.1);
        }

        /* Desktop Layout */
        @media (min-width: 968px) {
            .main-container {
                padding: 3rem 2rem;
                display: flex;
                gap: 2rem;
            }

            .info-container,
            .links-container {
                flex: 1;
                min-height: 600px;
                display: flex;
                flex-direction: column;
                justify-content: center;
            }

            .links-container {
                justify-content: flex-start;
            }

            .info-container {
                padding: 3rem;
            }

            .profile-pic {
                width: 160px;
                height: 160px;
            }

            .title {
                font-size: 3rem;
            }

            .bio {
                font-size: 1.1rem;
            }

            .link-item:hover {
                transform: translateX(8px);
            }

            .come-serve {
                max-width: 300px;
            }
        }

        /* Mobile Layout */
        @media (max-width: 767px) {
            .main-container {
                flex-direction: column;
            }

            .info-container {
                padding: 1.5rem;
                position: relative;
                background: url('https://images.unsplash.com/photo-1618005182380-4d8f8438790e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80') center/cover no-repeat;
                background: #ae4879;
                border-radius: 0;
                text-align: center;
                overflow: hidden;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
                align-items: center;
                justify-content: center;
            }

            .profile-pic {
                width: 120px;
                height: 120px;
            }

            .title {
                font-size: 2.25rem;
            }

            .bio {
                font-size: 0.95rem;
            }

            .back-to-top {
                bottom: 20px;
                right: 20px;
                width: 40px;
                height: 40px;
            }

            .come-serve {
                max-width: 100%;
            }
        }

        /* Accessibility */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            border: 0;
        }

        /* Touch Devices */
        @media (hover: none) {
            .link-item:active {
                background: #3d3d3d;
                border-color: var(--pink-accent);
                transform: scale(0.98);
            }

            .profile-pic:active {
                transform: scale(1.05);
                box-shadow: 0 0 35px rgba(255, 105, 180, 0.7), inset 0 0 15px rgba(255, 105, 180, 0.5);
            }
        }

        .info-buttons {
            width: 100%;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            /* Center the buttons */
            max-width: 300px;
            margin: 20px auto 0;
            /* Center horizontally with auto margins */
            z-index: 2;
            gap: 20px;
            position: relative;
        }

        .info-button {
            background: #363642;
            border: 2px solid var(--pink-accent);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            color: #fff;


        }

        .info-button:hover {
            box-shadow: 0 0 15px rgba(255, 105, 180, 0.5);
        }

        .info-button svg {
            width: 24px;
            height: 24px;
        }

        /* Enhanced Come Serve Button */
        .come-serve {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: start;
            justify-content: space-between;
            margin-top: 20px;
            z-index: 2;
            position: relative;
            padding: 10px 30px;
            border-radius: 100px;
            user-select: none;
            cursor: pointer;
            /* Dynamic moving gradient with vibrant pink shades */
            background: linear-gradient(90deg, #ff69b4, #ff99cc, #ff4081, #ff99cc, #ff69b4);
            background-size: 300% 100%;
            animation: gradientShift 4s ease infinite;
            /* Subtle pulsating glow */
            box-shadow: 0 0 10px rgba(255, 105, 180, 0.5), 0 0 20px rgba(255, 105, 180, 0.3);
            animation: pulseGlow 2s ease-in-out infinite;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .come-serve:hover {
            /* Slight scale up on hover for extra emphasis */
            transform: scale(1.02);
            box-shadow: 0 0 15px rgba(255, 105, 180, 0.7), 0 0 25px rgba(255, 105, 180, 0.5);
        }

        .come-serve:active {
            transform: scale(1.01);
        }

        .come-serve h2 {
            font-size: 23px;
            font-family: 'Playfair Display', serif;
            margin: 0;
        }

        .come-serve p {
            margin-top: -7px;
        }

        /* Gradient animation keyframes */
        @keyframes gradientShift {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        /* Pulsating glow keyframes */
        @keyframes pulseGlow {

            0%,
            100% {
                box-shadow: 0 0 10px rgba(255, 105, 180, 0.5), 0 0 20px rgba(255, 105, 180, 0.3);
            }

            50% {
                box-shadow: 0 0 15px rgba(255, 105, 180, 0.7), 0 0 30px rgba(255, 105, 180, 0.5);
            }
        }

        /* Popup Container */
        .popup {
            position: fixed;
            bottom: -100%;
            /* Start below the screen */
            left: 0;
            right: 0;
            background: var(--dark-secondary);
            padding: 2rem;
            height: 0;
            /* Start with zero height */
            max-height: calc(100% - env(safe-area-inset-top));
            /* Respect safe area for notch/dynamic island */
            overflow-y: auto;
            z-index: 1000;
            transition: height 0.5s cubic-bezier(0.4, 0, 0.2, 1), bottom 0.5s cubic-bezier(0.4, 0, 0.2, 1), visibility 0s linear 0.5s;
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.5);
            visibility: hidden;
            -webkit-overflow-scrolling: touch;
            /* Smooth scrolling on iOS */
        }

        .popup.show {
            height: 50%;
            /* Half-screen view */
            bottom: 0;
            visibility: visible;
            transition: height 0.5s cubic-bezier(0.4, 0, 0.2, 1), bottom 0.5s cubic-bezier(0.4, 0, 0.2, 1), visibility 0s linear;
        }

        .popup.full {
            height: calc(100% - env(safe-area-inset-top));
            /* Full screen minus safe area */
            bottom: 0;
            visibility: visible;
            transition: height 0.5s cubic-bezier(0.4, 0, 0.2, 1), bottom 0.5s cubic-bezier(0.4, 0, 0.2, 1), visibility 0s linear;
        }

        .popup-content {
            position: relative;
            max-width: 600px;
            margin: 0 auto;
            color: var(--text-primary);
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            padding-top: env(safe-area-inset-top);
            /* Add padding for notch */
        }

        .popup.show .popup-content,
        .popup.full .popup-content {
            opacity: 1;
        }

        .close-popup {
            position: relative;
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s ease-in-out;
            /* Smooth hover effect */
            z-index: 9999;
        }

        .close-popup:hover {
            transform: scale(1.1);
            /* Subtle scale on hover */
        }

        .close-popup svg {
            width: 24px;
            height: 24px;
            stroke: var(--pink-accent);
            transition: stroke 0.2s ease-in-out;
            /* Smooth color transition */
        }

        .close-popup:hover svg {
            stroke: #ffffff;
            /* Change color on hover */
        }

        .popup h2 {
            font-family: 'Playfair Display', serif;
            font-size: 1.75rem;
            color: var(--pink-accent);
            transform: translateY(10px);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s ease-in-out;
            /* Smooth slide-in */
        }

        .popup.show h2,
        .popup.full h2 {
            transform: translateY(0);
            opacity: 1;
        }

        .popup p,
        .popup ul {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
            transform: translateY(10px);
            opacity: 0;
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s ease-in-out 0.1s;
            /* Staggered slide-in */
        }

        .popup.show p,
        .popup.show ul,
        .popup.full p,
        .popup.full ul {
            transform: translateY(0);
            opacity: 1;
        }

        .popup ul {
            list-style: none;
            padding-left: 1rem;
        }

        .popup ul li {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
            position: relative;
        }

        .popup ul li::before {
            content: '•';
            color: var(--pink-accent);
            position: absolute;
            left: -1rem;
        }

        @media (min-width: 768px) {
            .popup {
                padding: 3rem;
            }

            .popup h2 {
                font-size: 2rem;
            }

            .popup p,
            .popup ul li {
                font-size: 1.1rem;
            }
        }

        .inside-popup-div {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2rem;
        }

        .popup::before,
        .form-popup::before {
            content: '';
            position: absolute;
            top: 8px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 5px;
            background: var(--pink-accent);
            border-radius: 3px;
            z-index: 1001;
            opacity: 0.7;
        }

        /* Form Popup Specific Styles */
        .form-popup {
            position: fixed;
            bottom: -100%;
            left: 0;
            right: 0;
            background: var(--dark-secondary);
            padding: 2rem;
            height: 0;
            max-height: calc(100% - env(safe-area-inset-top));
            overflow-y: auto;
            z-index: 1000;
            transition: height 0.5s cubic-bezier(0.4, 0, 0.2, 1), bottom 0.5s cubic-bezier(0.4, 0, 0.2, 1), visibility 0s linear 0.5s;
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.5);
            visibility: hidden;
            -webkit-overflow-scrolling: touch;
        }

        .form-popup.show {
            height: 50%;
            bottom: 0;
            visibility: visible;
            transition: height 0.5s cubic-bezier(0.4, 0, 0.2, 1), bottom 0.5s cubic-bezier(0.4, 0, 0.2, 1), visibility 0s linear;
        }

        .form-popup.full {
            height: calc(100% - env(safe-area-inset-top));
            bottom: 0;
            visibility: visible;
            transition: height 0.5s cubic-bezier(0.4, 0, 0.2, 1), bottom 0.5s cubic-bezier(0.4, 0, 0.2, 1), visibility 0s linear;
        }

        .form-popup-content {
            position: relative;
            max-width: 600px;
            margin: 0 auto;
            color: var(--text-primary);
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            padding-top: env(safe-area-inset-top);
        }

        .form-popup.show .form-popup-content,
        .form-popup.full .form-popup-content {
            opacity: 1;
        }

        .form-step {
            display: none;
            transform: translateY(20px);
            opacity: 0;
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s ease-in-out;
        }

        .form-step.active {
            display: block;
            transform: translateY(0);
            opacity: 1;
        }

        .form-step h2 {
            font-family: 'Playfair Display', serif;
            font-size: 1.75rem;
            color: var(--pink-accent);
            margin-bottom: 1rem;
        }

        .form-step p {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
        }

        .form-step input,
        .form-step select,
        .form-step textarea {
            width: 100%;
            padding: 0.75rem;
            background: #363642;
            border: 2px solid var(--pink-accent);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 1rem;
            margin-bottom: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-step input:focus,
        .form-step select:focus,
        .form-step textarea:focus {
            outline: none;
            border-color: #ffffff;
        }

        .form-step textarea {
            resize: vertical;
            min-height: 200px;
        }

        .form-step .error {
            color: #ff4040;
            font-size: 0.85rem;
            margin-bottom: 1rem;
            display: none;
        }

        .form-step .error.show {
            display: block;
        }

        .form-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 20px;
            justify-content: center;
        }

        .form-button {
            padding: 0.75rem 3.5rem;
            background: var(--pink-accent);
            border: none;
            border-radius: 60px;
            color: var(--text-primary);
            font-size: 1rem;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s ease, transform 0.2s ease;
        }

        .form-button:disabled {
            background: #555;
            cursor: not-allowed;
        }

        .form-button:hover:not(:disabled) {
            background: #ff85c0;
        }

        .form-button.back {
            background: #363642;
            border: 2px solid var(--pink-accent);
        }

        .form-button.back:hover:not(:disabled) {
            background: #4a4a5a;
        }

        .inside-form-div {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2rem;
        }

        @media (min-width: 768px) {
            .form-popup {
                padding: 3rem;
            }

            .form-step h2 {
                font-size: 2rem;
            }

            .form-step p {
                font-size: 1.1rem;
            }
        }

        /* Add these styles to the existing <style> section in the HTML */
        .roles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .role-card {
            background: #363642;
            border: 2px solid transparent;
            border-radius: 12px;
            padding: 1.5rem;
            transition: border-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            animation: fadeIn 0.8s ease-out forwards;
            opacity: 0;
        }

        .role-card:nth-child(1) {
            animation-delay: 0.2s;
        }

        .role-card:nth-child(2) {
            animation-delay: 0.3s;
        }

        .role-card:nth-child(3) {
            animation-delay: 0.4s;
        }

        .role-card:nth-child(4) {
            animation-delay: 0.5s;
        }

        .role-card:hover {
            border-color: var(--pink-accent);
            transform: translateX(8px);
            box-shadow: 0 0 15px rgba(255, 105, 180, 0.5);
        }

        @media (max-width: 767px) {
            .role-card:hover {
                transform: translateY(-5px);
            }
        }

        .role-icon {
            width: 34px;
            height: 34px;
            margin-bottom: 0.5rem;
        }

        .role-header {
            display: flex;
            justify-content: flex-start;
            gap: 20px;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .role-title {
            font-family: 'Inter', sans-serif;
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .role-status {
            font-family: 'Inter', sans-serif;
            font-size: 0.85rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .role-status.available::before {
            content: '';
            width: 10px;
            height: 10px;
            background: #00ff88;
            border-radius: 50%;
        }

        .role-status.taken::before {
            content: '';
            width: 10px;
            height: 10px;
            background: #ff4040;
            border-radius: 50%;
        }

        .role-status.available {
            color: #00ff88;
        }

        .role-status.taken {
            color: #ff4040;
        }

        .role-description {
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .role-taken {
            font-family: 'Inter', sans-serif;
            font-size: 0.85rem;
            color: #ff4040;
        }

        .role-button {
            padding: 0.5rem 1.5rem;
            background: linear-gradient(90deg, #ff69b4, #ff4081);
            border: none;
            border-radius: 60px;
            color: var(--text-primary);
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.3s ease;
        }

        .role-button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 10px rgba(255, 105, 180, 0.7);
        }

        .roles-footer {
            text-align: center;
            margin-top: 1rem;
        }

        .roles-footer p {
            font-family: 'Inter', sans-serif;
            font-size: 0.95rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .role-button.propose {
            padding: 0.75rem 2rem;
        }
    </style>
</head>

<body>
    <!-- Preload Images -->
    <div class="preload" style="display: none;">
        <img src="https://pbs.twimg.com/profile_images/1921606677255925760/PJR8EFM8_400x400.jpg" alt="">
        <img src="https://images.unsplash.com/photo-1618005182380-4d8f8438790e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80"
            alt="">
    </div>

    <div class="main-container" id="mainContainer">
        <!-- Info Container -->
        <section class="info-container fade-in">
            <div class="info-content">
                <img src="https://pbs.twimg.com/profile_images/1921606677255925760/PJR8EFM8_400x400.jpg"
                    alt="Princess Spizy Profile" class="profile-pic">
                <h1 class="title">Princess Spizy</h1>
                <p class="bio">wanna be my next play thing?</p>
            </div>
            <div class="info-buttons">
                <button class="info-button" aria-label="X" data-popup="X" id="x-info-button">
                    <div class="X-image-info">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/5/57/X_logo_2023_%28white%29.png">
                    </div>
                </button>
                <button class="info-button" aria-label="About Princess Spizy" data-popup="about">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="size-6">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" />
                    </svg>
                </button>
                <button class="info-button" aria-label="X" data-popup="loyal" id="loyal-info-button">
                    <div class="loyal-image-info">
                        <img
                            src="https://images.apifyusercontent.com/HGeK9XXbZt9OQbFEeWnFAwLabsB_De-GdUO1X60pSe8/rs:fill:250:250/cb:1/aHR0cHM6Ly9hcGlmeS1pbWFnZS11cGxvYWRzLXByb2QuczMudXMtZWFzdC0xLmFtYXpvbmF3cy5jb20vWUo3NmFxQXcyUXhEeG14aHgtYWN0b3ItWEhxb2ZIdjVadVB5Y3paREwtcUJram5BTGJ1OC1sb3lhbC1mYW5zLnBuZw.webp">
                    </div>
                </button>
                <button class="info-button" aria-label="Rules for Tributes" data-popup="rules" style="display: none;">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="size-6">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z" />
                    </svg>
                </button>
                <button class="info-button" aria-label="Princess Spizy's Wishlist" data-popup="wishlist"
                    style="display: none">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                        stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" />
                    </svg>
                </button>
            </div>
            <div class="come-serve" id="come-serve">
                <h2>Apply to serve</h2>
                <p>Let me put you in ur place 💋</p>
            </div>
        </section>

        <!-- Links Container -->
        <!-- Replace the entire <section class="links-container fade-in"> in the HTML -->
        <section class="links-container fade-in" style="animation-delay: 0.2s;">
            <!-- Gifts and Wishlist Dropdown -->
            <div class="link-item dropdown" data-dropdown="gifts">
                <div class="inside-dropdown-container">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="size-6">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M21 12a2.25 2.25 0 0 0-2.25-2.25H15a3 3 0 1 1-6 0H5.25A2.25 2.25 0 0 0 3 12m18 0v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6m18 0V9M3 12V9m18 0a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 9m18 0V6a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 6v3" />
                    </svg>
                    <div class="link-content">
                        <div class="link-title">Gifts and Wishlist</div>
                        <div class="link-description">Spoil me with items</div>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                        stroke="currentColor" class="arrow-icon dropdown-arrow" style="width: 20px; height: 20px;">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                    </svg>
                </div>
                <div class="dropdown-content">
                    <a href="https://throne.com/cupidsvyz" target="_blank" rel="noopener noreferrer"
                        class="link-item sub-item">
                        <div class="inside-item-container">
                            <div class="X-image throne">
                                <img src="https://panels.twitch.tv/panel-212934095-image-620a5538-34a4-43ab-880a-c90a89310b70"
                                    alt="Throne Icon">
                            </div>
                            <div class="link-content">
                                <div class="link-title">Throne</div>
                                <div class="link-description">Checkout my list</div>
                            </div>
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                                stroke="currentColor" class="arrow-icon" style="width: 20px; height: 20px;">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
                            </svg>
                        </div>
                        <span class="sr-only">Opens Throne in a new tab</span>
                    </a>
                    <a href="https://www.tributify.com/godcupidsvyz" target="_blank" rel="noopener noreferrer"
                        class="link-item sub-item">
                        <div class="inside-item-container">
                            <div class="X-image tributify">
                                <img src="https://dxe6dapr9jgm3.cloudfront.net/assets/8.54/build/assets/logo.80262406.webp"
                                    alt="Throne Icon">
                            </div>
                            <div class="link-content">
                                <div class="link-title">Tributify</div>
                                <div class="link-description">Buy me something!</div>
                            </div>
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                                stroke="currentColor" class="arrow-icon" style="width: 20px; height: 20px;">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
                            </svg>
                        </div>
                        <span class="sr-only">Opens Tributify in a new tab</span>
                    </a>
                </div>
            </div>

            <!-- Payment Methods Dropdown -->
            <div class="link-item dropdown" data-dropdown="payment">
                <div class="inside-dropdown-container">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                        stroke="currentColor" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2z" />
                    </svg>
                    <div class="link-content">
                        <div class="link-title">Payment Methods</div>
                        <div class="link-description">Send me your tributes</div>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                        stroke="currentColor" class="arrow-icon dropdown-arrow" style="width: 20px; height: 20px;">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                    </svg>
                </div>
                <div class="dropdown-content">
                    <a href="https://paypal.com" target="_blank" rel="noopener noreferrer" class="link-item sub-item">
                        <div class="inside-item-container">
                            <div class="X-image paypal">
                                <img src="https://upload.wikimedia.org/wikipedia/commons/a/a4/Paypal_2014_logo.png"
                                    alt="X Logo">
                            </div>
                            <div class="link-content">
                                <div class="link-title">PayPal</div>
                                <div class="link-description">Send a tribute</div>
                            </div>
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                                stroke="currentColor" class="arrow-icon" style="width: 20px; height: 20px;">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
                            </svg>
                        </div>
                        <span class="sr-only">Opens PayPal in a new tab</span>
                    </a>
                    <a href="https://paypal.com" target="_blank" rel="noopener noreferrer" class="link-item sub-item">
                        <div class="inside-item-container">
                            <div class="X-image paylah">
                                <img src="https://is1-ssl.mzstatic.com/image/thumb/Purple221/v4/0c/4c/40/0c4c40ff-57ee-0570-cc15-d4bcf46a5d11/AppIcon-0-0-1x_U007emarketing-0-7-0-0-sRGB-85-220.png/512x512bb.jpg"
                                    alt="X Logo">
                            </div>
                            <div class="link-content">
                                <div class="link-title">PayLah</div>
                                <div class="link-description">Send a tribute</div>
                            </div>
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                                stroke="currentColor" class="arrow-icon" style="width: 20px; height: 20px;">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
                            </svg>
                        </div>
                        <span class="sr-only">Opens PayPal in a new tab</span>
                    </a>
                </div>
            </div>

            <!-- Loyal Fans Link -->
            <a href="./admin.html" target="_blank" rel="noopener noreferrer" class="link-item" style="display: none;">
                <div class="inside-item-container">
                    <div class="X-image loyal-fans">
                        <img
                            src="https://images.apifyusercontent.com/HGeK9XXbZt9OQbFEeWnFAwLabsB_De-GdUO1X60pSe8/rs:fill:250:250/cb:1/aHR0cHM6Ly9hcGlmeS1pbWFnZS11cGxvYWRzLXByb2QuczMudXMtZWFzdC0xLmFtYXpvbmF3cy5jb20vWUo3NmFxQXcyUXhEeG14aHgtYWN0b3ItWEhxb2ZIdjVadVB5Y3paREwtcUJram5BTGJ1OC1sb3lhbC1mYW5zLnBuZw.webp">
                    </div>
                    <div class="link-content">
                        <div class="link-title">Loyal Fans</div>
                        <div class="link-description">Age verified</div>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                        stroke="currentColor" class="arrow-icon" style="width: 20px; height: 20px;">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
                    </svg>
                </div>
                <span class="sr-only">Opens Loyal Fans in a new tab</span>
            </a>

            <!-- X Link -->
            <a href="https://x.com/cupidsvyz" target="_blank" rel="noopener noreferrer" class="link-item"
                style="display: none;">
                <div class="inside-item-container">
                    <div class="X-image">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/5/57/X_logo_2023_%28white%29.png"
                            alt="X Logo">
                    </div>
                    <div class="link-content">
                        <div class="link-title">X</div>
                        <div class="link-description">Follow me!</div>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                        stroke="currentColor" class="arrow-icon" style="width: 20px; height: 20px;">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
                    </svg>
                </div>
                <span class="sr-only">Opens X in a new tab</span>
            </a>

            <!-- Menu Link -->
            <a href="#" target="_blank" rel="noopener noreferrer" class="link-item" style="display: none;">
                <div class="inside-item-container">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="size-6">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                    </svg>
                    <div class="link-content">
                        <div class="link-title">Menu</div>
                        <div class="link-description">Explore more options</div>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                        stroke="currentColor" class="arrow-icon" style="width: 20px; height: 20px;">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
                    </svg>
                </div>
                <span class="sr-only">Opens Menu in a new tab</span>
            </a>

            <!-- Jobs for Simps Link -->
            <a href="#" class="link-item" data-popup="jobs">
                <div class="inside-item-container">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="size-6">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 3 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z" />
                    </svg>
                    <div class="link-content">
                        <div class="link-title">Jobs for Simps</div>
                        <div class="link-description">Opportunities to serve</div>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                        stroke="currentColor" class="arrow-icon" style="width: 20px; height: 20px;">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
                    </svg>
                </div>
                <span class="sr-only">Opens Jobs popup</span>
            </a>
        </section>
    </div>

    <!-- Back to Top Button -->
    <a href="#top" class="back-to-top" aria-label="Back to top">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
            style="width: 24px; height: 24px;">
            <path stroke-linecap="round" stroke-linejoin="round" d="M5 15l7-7 7 7" />
        </svg>
    </a>

    <!-- Popups -->
    <div class="popup" id="about-popup">
        <div class="popup-content">
            <div class="inside-popup-div">
                <h2>About me</h2>
                <button class="close-popup" aria-label="Close About Popup">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <p>I’m Princess Spizy, your petite singaporean chinese brat! I stumbled into this world because guys were
                willing to spoil me just for existing. Like, duh, I'm so hot, who wouldn’t want to worship someone as
                hot as me? I love the rush of controlling wallets and watching subs beg to please me. Age-verified and
                legit, I’m here to bully you into submission until your wallet is completely drained. Ready to fall for
                me?</p>
            <ul>
                <li>Nationality: singaporean chinese</li>
                <li>Obsession: money</li>
                <li>Fav colour: pink!!</li>
            </ul>
        </div>
    </div>

    <div class="popup" id="rules-popup">
        <div class="popup-content">
            <div class="inside-popup-div">
                <h2>Rules for tributes</h2>
                <button class="close-popup" aria-label="Close Rules Popup">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <p>Listen up, losers, if you wanna serve me, you better come correct. Send a tribute <b>before</b> you even
                think about DMing me — $33.33 minimum, no excuses. Use Throne, PayPal, or Tributify, and include a cute
                lil’ message saying why you’re obsessed with me. I expect loyalty, consistency, and zero whining.
                Approach with respect, know your place, and don’t waste my time with small talk. I love seeing big
                sends, creative gifts, and subs who go all out to make me smile. Sessions? Only for my faves who prove
                they’re serious. Keep up regular tributes, follow my instructions, and maybe I’ll notice you. Disobey,
                and you’re out. Got it? Now get to work.</p>
            <ul>
                <li>Tribute first: $33.33+ via approved platforms</li>
                <li>Always include a respectful message</li>
                <li>Be consistent or get ignored</li>
            </ul>
        </div>
    </div>

    <div class="popup" id="wishlist-popup" style="display: none">
        <div class="popup-content">
            <div class="inside-popup-div">
                <h2>My payment methods</h2>
                <button class="close-popup" aria-label="Close Wishlist Popup">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <p>Spoiling me is your new favorite hobby, and my Throne wishlist is where you start. It’s packed with cute,
                luxe, and fun stuff that screams <b>me</b> — from designer bags to adorable trinkets. Every gift you
                send shows you’re serious about making your Princess happy, and trust me, I notice the good boys who go
                big. I prefer Throne for wishlist vibes, but PayPal and Tributify work for cash tributes. Want to stand
                out? Pick something extra special or surprise me with a custom gift. I update my list all the time, so
                keep checking to stay in my good graces. Funding my manicures, vacays, or shopping sprees? Even better.
                Step up, send, and watch me glow.</p>
            <ul>
                <li>Main platform: Throne (in the links below)</li>
                <li>Cash tributes: PayPal, Tributify</li>
                <li>Pro tip: Surprise me with something extra</li>
            </ul>
        </div>
    </div>

    <div class="popup" id="jobs-popup">
        <div class="popup-content">
            <div class="inside-popup-div">
                <h2>Jobs for Simps</h2>
                <button class="close-popup" aria-label="Close Jobs Popup">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <p>Prove your devotion by taking on a role to serve Princess Spizy. Available roles are your chance to
                shine—taken ones show who’s already in my favor. Step up or stay irrelevant.</p>
            <div class="roles-grid" id="roles-grid"></div>
            <div class="roles-footer">
                <p>Want to serve in a unique way? Propose your own role!</p>
                <button class="role-button propose" onclick="openFormWithRole('custom')">Propose a Role</button>
            </div>
        </div>
    </div>

    <!-- Form Popup -->
    <div class="form-popup" id="form-popup">
        <div class="form-popup-content">
            <div class="inside-form-div">
                <h2>Application to Serve</h2>
                <button class="close-popup" aria-label="Close Form Popup" onclick="closeFormPopup()">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <form action="https://api.web3forms.com/submit" method="POST" id="application-form">
                <input type="hidden" name="access_key" value="bb2fb002-4b4e-4a1c-bd4e-c38f8a60e198">
                <input type="hidden" name="subject" value="New Application Submission from Princess Spizy's Form">
                <input type="hidden" name="redirect" value="https://cupidsvyz.com/">
                <input type="hidden" name="from_name" value="Princess Spizy Application">
                <input type="hidden" name="recipient" value="kohzanden@gmail.com">
                <div class="form-step" data-step="1">
                    <h2>Ready to Serve?</h2>
                    <p>So, you think you’ve got what it takes to serve Princess Spizy? This isn’t a game, so approach
                        correctly. I expect loyalty, respect, and <b>generous</b> tributes—$33.33 minimum to even get my
                        attention. You’ll need to prove you’re serious with every step of this application. Only the
                        best get to kneel at my feet, so don’t waste my time. Ready to start? Hit the button and show me
                        that you mean it.</p>
                    <div class="form-buttons">
                        <button type="button" class="form-button" onclick="startForm()">Sell your soul</button>
                    </div>
                </div>
                <div class="form-step" data-step="2">
                    <h2>Role Selection</h2>
                    <p>Which role are you applying for, sub? Choose one or propose your own.</p>
                    <select id="role" name="role" required>
                        <option value="" disabled selected>Select Role</option>
                        <option value="wallet-slave">Wallet Slave</option>
                        <option value="content-minion">Content Minion</option>
                        <option value="errand-boy">Errand Boy</option>
                        <option value="custom">Custom Role</option>
                    </select>
                    <textarea id="custom-role" name="custom_role"
                        placeholder="Describe your custom role (100-300 words, required if Custom Role is selected)"
                        style="display: none;"></textarea>
                    <p class="error" id="step2-error">Please select a role and provide details for custom roles (100-300
                        words).</p>
                    <div class="form-buttons">
                        <button type="button" class="form-button back" onclick="prevStep()">Back</button>
                        <button type="button" class="form-button" onclick="nextStep(2)">Next</button>
                    </div>
                </div>
                <div class="form-step" data-step="3">
                    <h2>Basic Info</h2>
                    <p>Tell me who you are, sub. I need your name and contact so I know who’s begging to serve me.</p>
                    <input type="text" id="name" name="name" placeholder="Your Name" required>
                    <input type="email" id="email" name="email" placeholder="Your Email" required>
                    <p class="error" id="step3-error">Please fill out all fields correctly.</p>
                    <div class="form-buttons">
                        <button type="button" class="form-button back" onclick="prevStep()">Back</button>
                        <button type="button" class="form-button" onclick="nextStep(3)">Next</button>
                    </div>
                </div>
                <div class="form-step" data-step="4">
                    <h2>Your Experience</h2>
                    <p>Spill it—have you served a domme before? What’s your deal with findom?</p>
                    <select id="experience" name="experience" required>
                        <option value="" disabled selected>Select Experience</option>
                        <option value="new">New to Findom</option>
                        <option value="some">Some Experience</option>
                        <option value="experienced">Experienced Sub</option>
                    </select>
                    <textarea id="experience-details" name="experience_details"
                        placeholder="Describe your experience (100-300 words)" required></textarea>
                    <p class="error" id="step4-error">Please select an option and provide details (100-300 words).</p>
                    <div class="form-buttons">
                        <button type="button" class="form-button back" onclick="prevStep()">Back</button>
                        <button type="button" class="form-button" onclick="nextStep(4)">Next</button>
                    </div>
                </div>
                <div class="form-step" data-step="5">
                    <h2>Your Commitment</h2>
                    <p>How often are you ready to tribute? Be real, I don’t have time for flakes.</p>
                    <select id="tribute-frequency" name="tribute_frequency" required>
                        <option value="" disabled selected>Select Frequency</option>
                        <option value="weekly">Weekly</option>
                        <option value="biweekly">Bi-Weekly</option>
                        <option value="monthly">Monthly</option>
                    </select>
                    <input type="number" id="tribute-amount" name="tribute_amount"
                        placeholder="Average Tribute Amount ($)" min="50" required>
                    <p class="error" id="step5-error">Please select a frequency and enter an amount ($33.33+).</p>
                    <div class="form-buttons">
                        <button type="button" class="form-button back" onclick="prevStep()">Back</button>
                        <button type="button" class="form-button" onclick="nextStep(5)">Next</button>
                    </div>
                </div>
                <div class="form-step" data-step="6">
                    <h2>Your Limits</h2>
                    <p>What’s off-limits for you? Don’t bore me, but I need to know.</p>
                    <textarea id="limits" name="limits" placeholder="Describe your limits or boundaries"
                        required></textarea>
                    <p class="error" id="step6-error">Please provide details about your limits.</p>
                    <div class="form-buttons">
                        <button type="button" class="form-button back" onclick="prevStep()">Back</button>
                        <button type="button" class="form-button" onclick="nextStep(6)">Next</button>
                    </div>
                </div>
                <div class="form-step" data-step="7">
                    <h2>Why Me?</h2>
                    <p>Tell me why you’re obsessed with serving *me*. Make it good, I’m picky.</p>
                    <textarea id="motivation" name="motivation"
                        placeholder="Why do you want to serve Princess Spizy? (100-300 words)" required></textarea>
                    <p class="error" id="step7-error">Please provide a response (100-300 words).</p>
                    <div class="form-buttons">
                        <button type="button" class="form-button back" onclick="prevStep()">Back</button>
                        <button type="button" class="form-button" onclick="nextStep(7)">Next</button>
                    </div>
                </div>
                <div class="form-step" data-step="8">
                    <h2>Initial Tribute</h2>
                    <p>Prove you’re serious. Pick a platform and send your first tribute now.</p>
                    <select id="tribute-platform" name="tribute_platform" required>
                        <option value="" disabled selected>Select Platform</option>
                        <option value="throne">Throne</option>
                        <option value="paypal">PayPal</option>
                        <option value="tributify">Tributify</option>
                    </select>
                    <input type="text" id="tribute-proof" name="tribute_proof" placeholder="Transaction ID or Proof"
                        required>
                    <p class="error" id="step8-error">Please select a platform and provide proof.</p>
                    <div class="form-buttons">
                        <button type="button" class="form-button back" onclick="prevStep()">Back</button>
                        <button type="button" class="form-button" onclick="nextStep(8)">Next</button>
                    </div>
                </div>
                <div class="form-step" data-step="9">
                    <h2>Review & Submit</h2>
                    <p>Look over your answers, sub. This is your shot to impress me. Ready to submit?</p>
                    <div id="review-content"
                        style="background: #363642; padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem;"></div>
                    <p class="error" id="step9-error">Something went wrong. Please try again.</p>
                    <div class="form-buttons">
                        <button type="button" class="form-button back" onclick="prevStep()">Back</button>
                        <button type="submit" class="form-button" id="submit-btn">Submit</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Ensure Firebase is initialized (from firebase-config.js)
            if (typeof firebase === 'undefined' || !firebase.apps.length) {
                console.error('Firebase not initialized. Check firebase-config.js.');
                return;
            }
            const database = firebase.database();

            // Lazy load images
            const images = document.querySelectorAll('img[data-src]');
            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        img.src = img.dataset.src;
                        img.removeAttribute('data-src');
                        observer.unobserve(img);
                    }
                });
            });
            images.forEach(img => observer.observe(img));

            // Back to Top Button Logic
            const backToTopButton = document.querySelector('.back-to-top');
            window.addEventListener('scroll', () => {
                if (window.scrollY > 300) {
                    backToTopButton.classList.add('show');
                } else {
                    backToTopButton.classList.remove('show');
                }
            });

            // Smooth scroll for back to top
            // Update back-to-top button to scroll main-container
            backToTopButton.addEventListener('click', (e) => {
                e.preventDefault();
                document.querySelector('.main-container').scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });

            // Social media links
            const XinfoButton = document.querySelector('[data-popup="X"]');
            XinfoButton.addEventListener('click', () => {
                window.open('https://x.com/cupidsvyz', '_blank');
            });

            const loyalInfoButton = document.querySelector('[data-popup="loyal"]');
            loyalInfoButton.addEventListener('click', () => {
                window.open('https://www.loyalfans.com/cupidsvyz', '_blank');
            });

            // Popup Logic
            const popupButtons = document.querySelectorAll('.info-button');
            const popups = document.querySelectorAll('.popup');
            const closeButtons = document.querySelectorAll('.close-popup');
            popupButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const popupId = button.getAttribute('data-popup') + '-popup';
                    const popup = document.getElementById(popupId);
                    popups.forEach(p => {
                        if (p !== popup) {
                            p.classList.remove('show', 'full');
                            p.style.visibility = 'hidden';
                        }
                    });
                    if (popup) {
                        popup.classList.add('show');
                        popup.style.visibility = 'visible';
                        popup.classList.remove('full');
                        document.getElementById('mainContainer').classList.add('no-scroll'); // Disable background scrolling
                    }
                });
            });

            closeButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const popup = button.closest('.popup, .form-popup');
                    if (popup) {
                        popup.classList.remove('show', 'full');
                        setTimeout(() => {
                            popup.style.visibility = 'hidden';
                            document.getElementById('mainContainer').classList.remove('no-scroll'); // Re-enable scrolling
                            if (popup.id === 'form-popup') {
                                showStep(1);
                                resetForm();
                            }
                        }, 500);
                    }
                });
            });

            // Jobs for Simps link to open popup
            const jobsLink = document.querySelector('[data-popup="jobs"]');
            if (jobsLink) {
                jobsLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    const popup = document.getElementById('jobs-popup');
                    popups.forEach(p => {
                        if (p !== popup) {
                            p.classList.remove('show', 'full');
                            p.style.visibility = 'hidden';
                        }
                    });
                    if (popup) {
                        popup.classList.add('show');
                        popup.style.visibility = 'visible';
                        popup.classList.remove('full');
                        document.getElementById('mainContainer').classList.add('no-scroll'); // Disable background scrolling
                    }
                });
            }

            // Load roles from Firebase
            function loadRoles() {
                const rolesRef = database.ref('roles');
                rolesRef.on('value', (snapshot) => {
                    const roles = snapshot.val();
                    const rolesGrid = document.getElementById('roles-grid');
                    rolesGrid.innerHTML = '';
                    if (roles) {
                        // Populate roles grid
                        Object.keys(roles).forEach((key, index) => {
                            const role = roles[key];
                            const roleCard = document.createElement('div');
                            roleCard.className = 'role-card';
                            roleCard.dataset.role = key;
                            roleCard.style.animationDelay = `${0.2 + index * 0.1}s`;
                            roleCard.innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="var(--pink-accent)" class="role-icon">
                        ${getHeroiconPath(role.icon)}
                    </svg>
                    <div class="role-header">
                        <h3 class="role-title">${role.title}</h3>
                        <span class="role-status ${role.status}">${role.status.charAt(0).toUpperCase() + role.status.slice(1)}</span>
                    </div>
                    <p class="role-description">${role.description}</p>
                    ${role.status === 'taken' ? `<p class="role-taken">Taken by: ${role.takenBy}</p>` : ''}
                    ${role.status === 'available' ? `<button class="role-button" onclick="openFormWithRole('${key}')">Apply Now</button>` : ''}
                `;
                            rolesGrid.appendChild(roleCard);
                        });
                        // Populate role dropdown
                        populateRoleDropdown(roles);
                    }
                }, (error) => {
                    console.error('Failed to load roles:', error);
                });
            }

            function getHeroiconPath(iconName) {
                const icons = {
                    'user': '<path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" />',
                    'gift': '<path stroke-linecap="round" stroke-linejoin="round" d="M21 12a2.25 2.25 0 0 0-2.25-2.25H15a3 3 0 1 1-6 0H5.25A2.25 2.25 0 0 0 3 12m18 0v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6m18 0V9M3 12V9m18 0a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 9m18 0V6a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 6v3" />',
                    'heart': '<path stroke-linecap="round" stroke-linejoin="round" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />',
                    'briefcase': '<path stroke-linecap="round" stroke-linejoin="round" d="M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 3 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z" />'
                    // Add more icons as needed
                };
                return icons[iconName] || icons['user'];
            }

            // Form Logic
            const comeServeButton = document.querySelector('#come-serve');
            const formPopup = document.querySelector('#form-popup');
            const formSteps = formPopup.querySelectorAll('.form-step');
            let currentStep = 1;
            let isProcessing = false;

            // Show specific step
            const showStep = (step) => {
                formSteps.forEach(s => s.classList.remove('active'));
                const activeStep = formPopup.querySelector(`[data-step="${step}"]`);
                if (activeStep) {
                    activeStep.classList.add('active');
                    currentStep = step;
                    if (step === 8) {
                        populateReview();
                    }
                }
            };

            // Open form popup
            comeServeButton.addEventListener('click', () => {
                if (isProcessing) return;
                isProcessing = true;
                formPopup.classList.add('show');
                formPopup.style.visibility = 'visible';
                showStep(1);
                popups.forEach(p => {
                    p.classList.remove('show', 'full');
                    p.style.visibility = 'hidden';
                });
                document.getElementById('mainContainer').classList.add('no-scroll'); // Disable background scrolling
                setTimeout(() => {
                    isProcessing = false;
                }, 500);
            });

            // Close form popup
            window.closeFormPopup = () => {
                if (isProcessing) return;
                isProcessing = true;
                formPopup.classList.remove('show', 'full');
                setTimeout(() => {
                    formPopup.style.visibility = 'hidden';
                    showStep(1);
                    resetForm();
                    document.getElementById('mainContainer').classList.remove('no-scroll'); // Re-enable scrolling
                    isProcessing = false;
                }, 500);
            };

            // Start form
            window.startForm = () => {
                if (isProcessing) return;
                isProcessing = true;
                formPopup.classList.add('show');
                formPopup.style.visibility = 'visible';
                showStep(2);
                setTimeout(() => {
                    isProcessing = false;
                }, 500);
            };

            // Previous step
            window.prevStep = () => {
                if (isProcessing || currentStep <= 2) return;
                isProcessing = true;
                showStep(currentStep - 1);
                setTimeout(() => {
                    isProcessing = false;
                }, 500);
            };

            // Next step with validation
            window.nextStep = (step) => {
                if (isProcessing) return;
                isProcessing = true;

                const validateStep = () => {
                    const error = formPopup.querySelector(`#step${step}-error`);
                    error.classList.remove('show');

                    if (step === 2) {
                        const role = document.querySelector('#role').value;
                        const customRole = document.querySelector('#custom-role').value.trim();
                        const wordCount = customRole.split(/\s+/).filter(w => w).length;
                        if (!role || (role === 'custom' && (!customRole || wordCount < 100 || wordCount > 300))) {
                            error.classList.add('show');
                            error.textContent = 'Please select a role and provide details for custom roles (100-300 words).';
                            return false;
                        }
                    } else if (step === 3) {
                        const name = document.querySelector('#name').value.trim();
                        const email = document.querySelector('#email').value.trim();
                        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                        if (!name || !email || !emailRegex.test(email)) {
                            error.classList.add('show');
                            error.textContent = 'Please fill out all fields correctly.';
                            return false;
                        }
                    } else if (step === 4) {
                        const experience = document.querySelector('#experience').value;
                        const details = document.querySelector('#experience-details').value.trim();
                        const wordCount = details.split(/\s+/).filter(w => w).length;
                        if (!experience || !details || wordCount < 100 || wordCount > 300) {
                            error.classList.add('show');
                            error.textContent = 'Please select an option and provide details (100-300 words).';
                            return false;
                        }
                    } else if (step === 5) {
                        const frequency = document.querySelector('#tribute-frequency').value;
                        const amount = parseFloat(document.querySelector('#tribute-amount').value);
                        if (!frequency || isNaN(amount) || amount < 33.33) {
                            error.classList.add('show');
                            error.textContent = 'Please select a frequency and enter an amount ($33.33+).';
                            return false;
                        }
                    } else if (step === 6) {
                        const limits = document.querySelector('#limits').value.trim();
                        if (!limits) {
                            error.classList.add('show');
                            error.textContent = 'Please provide details about your limits.';
                            return false;
                        }
                    } else if (step === 7) {
                        const motivation = document.querySelector('#motivation').value.trim();
                        const wordCount = motivation.split(/\s+/).filter(w => w).length;
                        if (!motivation || wordCount < 100 || wordCount > 300) {
                            error.classList.add('show');
                            error.textContent = 'Please provide a response (100-300 words).';
                            return false;
                        }
                    } else if (step === 8) {
                        const platform = document.querySelector('#tribute-platform').value;
                        const proof = document.querySelector('#tribute-proof').value.trim();
                        if (!platform || !proof) {
                            error.classList.add('show');
                            error.textContent = 'Please select a platform and provide proof.';
                            return false;
                        }
                    }
                    return true;
                };

                if (validateStep()) {
                    if (step === 8) {
                        showStep(9);
                    } else {
                        showStep(step + 1);
                    }
                }
                setTimeout(() => {
                    isProcessing = false;
                }, 500);
            };

            // Populate review step
            function populateReview() {
                const reviewContent = document.querySelector('#review-content');
                const roleSelect = document.querySelector('#role');
                const roleId = roleSelect.value;
                const customRole = document.querySelector('#custom-role').value;
                let roleDisplay = 'Custom Role';

                if (roleId !== 'custom') {
                    const selectedOption = roleSelect.options[roleSelect.selectedIndex];
                    roleDisplay = selectedOption.text;
                }

                reviewContent.innerHTML = `
            <p><strong>Role:</strong> ${roleDisplay}</p>
            ${roleId === 'custom' ? `<p><strong>Custom Role Description:</strong> ${customRole}</p>` : ''}
            <p><strong>Name:</strong> ${document.querySelector('#name').value}</p>
            <p><strong>Email:</strong> ${document.querySelector('#email').value}</p>
            <p><strong>Experience:</strong> ${document.querySelector('#experience').value}</p>
            <p><strong>Experience Details:</strong> ${document.querySelector('#experience-details').value}</p>
            <p><strong>Tribute Frequency:</strong> ${document.querySelector('#tribute-frequency').value}</p>
            <p><strong>Tribute Amount:</strong> $${document.querySelector('#tribute-amount').value}</p>
            <p><strong>Limits:</strong> ${document.querySelector('#limits').value}</p>
            <p><strong>Motivation:</strong> ${document.querySelector('#motivation').value}</p>
            <p><strong>Tribute Platform:</strong> ${document.querySelector('#tribute-platform').value}</p>
            <p><strong>Tribute Proof:</strong> ${document.querySelector('#tribute-proof').value}</p>
        `;
            }

            // Modified submitForm function
            window.submitForm = async () => {
                if (isProcessing) return;
                isProcessing = true;
                const error = document.querySelector('#step8-error');
                error.classList.remove('show');

                const form = document.querySelector('#application-form');
                const formData = new FormData(form);
                formData.append('submission_date', new Date().toISOString());
                formData.append('Tribute Platform', document.querySelector('#tribute-platform').value);
                formData.append('Tribute Proof', document.querySelector('#tribute-proof').value);

                try {
                    const response = await fetch('https://api.web3forms.com/submit', {
                        method: 'POST',
                        body: formData
                    });
                    const result = await response.json();

                    if (result.success) {
                        alert('Application submitted! Princess Spizy will review your submission.');
                        formPopup.classList.remove('show', 'full');
                        setTimeout(() => {
                            formPopup.style.visibility = 'hidden';
                            showStep(1);
                            resetForm();
                            isProcessing = false;
                            window.location.href = 'https://yourdomain.com/thank-you.html';
                        }, 500);
                    } else {
                        throw new Error(result.message || 'Submission failed');
                    }
                } catch (err) {
                    error.textContent = 'Failed to submit application. Please try again later.';
                    error.classList.add('show');
                    isProcessing = false;
                }
            };

            // Reset form
            const resetForm = () => {
                const inputs = formPopup.querySelectorAll('input, select, textarea');
                inputs.forEach(input => {
                    if (input.type === 'text' || input.type === 'email' || input.type === 'number' || input.tagName === 'TEXTAREA') {
                        input.value = '';
                    } else if (input.tagName === 'SELECT') {
                        input.selectedIndex = 0;
                    }
                });
                formPopup.querySelectorAll('.error').forEach(e => e.classList.remove('show'));
                document.querySelector('#review-content').innerHTML = '';
            };

            function populateRoleDropdown(roles) {
                const roleSelect = document.querySelector('#role');
                roleSelect.innerHTML = '<option value="" disabled selected>Select Role</option>';
                if (roles) {
                    Object.keys(roles).forEach(key => {
                        const role = roles[key];
                        // Only include roles with status 'available'
                        if (role.status === 'available') {
                            const option = document.createElement('option');
                            option.value = role.title; // Use role title as value instead of key
                            option.textContent = role.title;
                            roleSelect.appendChild(option);
                        }
                    });
                }
                // Always include Custom Role option
                const customOption = document.createElement('option');
                customOption.value = 'custom';
                customOption.textContent = 'Custom Role';
                roleSelect.appendChild(customOption);
            }

            // Open form with pre-selected role
            window.openFormWithRole = (role) => {
                if (isProcessing) return;
                isProcessing = true;
                formPopup.classList.add('show');
                formPopup.style.visibility = 'visible';
                popups.forEach(p => {
                    p.classList.remove('show', 'full');
                    p.style.visibility = 'hidden';
                });
                showStep(2);
                const roleSelect = document.querySelector('#role');
                roleSelect.value = role;
                toggleCustomRoleField(role);
                setTimeout(() => {
                    isProcessing = false;
                }, 500);
            };

            // Toggle custom role textarea based on selection
            const roleSelect = document.querySelector('#role');
            if (roleSelect) {
                roleSelect.addEventListener('change', (e) => {
                    toggleCustomRoleField(e.target.value);
                });
            }

            function toggleCustomRoleField(role) {
                const customRoleField = document.querySelector('#custom-role');
                if (role === 'custom') {
                    customRoleField.style.display = 'block';
                    customRoleField.setAttribute('required', 'required');
                } else {
                    customRoleField.style.display = 'none';
                    customRoleField.removeAttribute('required');
                    customRoleField.value = '';
                }
            }

            // Expand popup on tap or scroll
            const expandablePopups = document.querySelectorAll('.popup, .form-popup');
            expandablePopups.forEach(popup => {
                popup.addEventListener('touchstart', (e) => {
                    // Prevent expansion if interacting with form inputs
                    if (popup.classList.contains('form-popup') &&
                        (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA' || e.target.tagName === 'SELECT')) {
                        return;
                    }
                    if (!popup.classList.contains('full')) {
                        e.preventDefault();
                        popup.classList.add('full');
                    }
                }, {
                    passive: false
                });

                popup.addEventListener('scroll', () => {
                    if (!isProcessing && !popup.classList.contains('full')) {
                        isProcessing = true;
                        popup.classList.add('full');
                        setTimeout(() => {
                            isProcessing = false;
                        }, 500);
                    }
                });

                popup.addEventListener('transitionstart', () => {
                    if (popup.classList.contains('show') || popup.classList.contains('full')) {
                        popup.style.visibility = 'visible';
                    }
                });
            });

            // Drag-to-dismiss for popups
            const dragPopups = document.querySelectorAll('.popup, .form-popup');
            dragPopups.forEach(popup => {
                let startY = 0;
                let currentY = 0;
                let isDragging = false;

                popup.addEventListener('touchstart', (e) => {
                    // Prevent dragging if interacting with form inputs
                    if (popup.classList.contains('form-popup') &&
                        (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA' || e.target.tagName === 'SELECT')) {
                        return;
                    }
                    startY = e.touches[0].clientY;
                    isDragging = true;
                    popup.style.transition = 'none';
                }, {
                    passive: true
                });

                popup.addEventListener('touchmove', (e) => {
                    if (!isDragging) return;
                    currentY = e.touches[0].clientY;
                    const deltaY = currentY - startY;
                    if (deltaY > 0) {
                        popup.style.transform = `translateY(${deltaY}px)`;
                    }
                }, {
                    passive: true
                });

                popup.addEventListener('touchend', () => {
                    if (!isDragging) return;
                    isDragging = false;
                    popup.style.transition = 'height 0.5s cubic-bezier(0.4, 0, 0.2, 1), bottom 0.5s cubic-bezier(0.4, 0, 0.2, 1), transform 0.5s cubic-bezier(0.4, 0, 0.2, 1)';
                    popup.style.transform = 'translateY(0)';

                    const deltaY = currentY - startY;
                    if (deltaY > 150) {
                        popup.classList.remove('show', 'full');
                        setTimeout(() => {
                            popup.style.visibility = 'hidden';
                            document.getElementById('mainContainer').classList.remove('no-scroll');
                            if (popup.id === 'form-popup') {
                                showStep(1);
                                resetForm();
                            }
                        }, 500);
                    }
                });
            });

            // Dropdown Logic
            const dropdowns = document.querySelectorAll('.link-item.dropdown');
            dropdowns.forEach(dropdown => {
                dropdown.addEventListener('click', (e) => {
                    e.stopPropagation();
                    e.preventDefault();
                    const dropdownContent = dropdown.querySelector('.dropdown-content');
                    const isOpen = dropdown.classList.contains('open');

                    // Close all other dropdowns and reset their borderRadius
                    document.querySelectorAll('.link-item.dropdown').forEach(otherDropdown => {
                        if (otherDropdown !== dropdown) {
                            otherDropdown.classList.remove('open');
                            const otherContent = otherDropdown.querySelector('.dropdown-content');
                            if (otherContent) {
                                otherContent.classList.remove('show');
                            }
                            otherDropdown.style.borderRadius = '200px';
                        }
                    });

                    // Toggle current dropdown
                    dropdown.classList.toggle('open');
                    dropdownContent.classList.toggle('show');

                    // Set borderRadius based on open state
                    dropdown.style.borderRadius = isOpen ? '200px' : '40px';
                });
            });

            // Prevent clicks inside dropdown-content from closing it
            document.querySelectorAll('.dropdown-content').forEach(content => {
                content.addEventListener('click', (e) => {
                    e.stopPropagation();
                });
            });

            // Initialize roles loading
            loadRoles();
        });
    </script>
</body>

</html>
